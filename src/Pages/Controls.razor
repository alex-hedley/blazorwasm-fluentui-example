@page "/controls"
@*@inject DataSource Data*@

<PageTitle>Controls</PageTitle>

<h1>Controls</h1>

<FluentBreadcrumb>
    <FluentBreadcrumbItem Href="#">
        Breadcrumb item 1
        <FluentIcon Slot="start" Name="@FluentIcons.Home" Size="@IconSize.Size16" Color=Color.Neutral />
    </FluentBreadcrumbItem>
    <FluentBreadcrumbItem Href="#">
        Breadcrumb item 2
        <FluentIcon Slot="start" Name="@FluentIcons.Clipboard" Size="@IconSize.Size16" Color=Color.Neutral />
    </FluentBreadcrumbItem>
    <FluentBreadcrumbItem>
        Breadcrumb item 3
        <FluentIcon Slot="start" Name="@FluentIcons.Money" Size="@IconSize.Size16" Color=Color.Neutral />
    </FluentBreadcrumbItem>
</FluentBreadcrumb>

<FluentDivider></FluentDivider>

<FluentAccordion ActiveId="@activeId" OnAccordionItemChange="HandleOnAccordionItemChange">
    <FluentAccordionItem Heading="Panel one">
        <FluentIcon Slot="start" Name="@FluentIcons.Globe" Size="@IconSize.Size20" Color=Color.Neutral />
        Panel one content, using the 'start' slot for extra header content (in this case an icon)
    </FluentAccordionItem>
    <FluentAccordionItem Heading="Panel two">
        <div slot="end">
            #end#
        </div>
        Panel two content, using the 'end' slot for extra header content (in this case an HTML button)
    </FluentAccordionItem>
    <FluentAccordionItem Expanded="true" Heading="Panel three">
        Panel three content
    </FluentAccordionItem>
</FluentAccordion>

<p>Last changed accordion item: @changed?.Heading</p>

<FluentDivider></FluentDivider>

<div>
    <FluentBadge Fill="highlight" Color="highlight">
        Badge
    </FluentBadge>
    <FluentBadge Fill="lowlight" Color="lowlight">
        Badge
    </FluentBadge>
</div>

<FluentCalendar DisabledDates=@disabledDates @bind-SelectedDates=@selectedDates DisabledSelectable=false></FluentCalendar>

<p>Selected dates</p>
<ul>
    @foreach (DateOnly date in selectedDates)
    {
        <li>@date.ToString("yyyy-MM-dd")</li>
    }
</ul>

<FluentDivider></FluentDivider>

<p>With a label: </p>
<FluentCheckbox @bind-Value=value2>label</FluentCheckbox>

<FluentDivider></FluentDivider>

@*<h4>With Placeholder</h4>
    <FluentCombobox Placeholder="Please select a size" Items="@Data.Sizes" @bind-Value="@size" />
    <p>
        Selected size: @size
    </p>*@

@code {
    // -----------------------------------
    // Accordion
    // -----------------------------------
    string activeId = "accordion-1";

    FluentAccordionItem? changed;

    private void HandleOnAccordionItemChange(FluentAccordionItem item)
    {
        changed = item;
    }

    // -----------------------------------
    // Calendar
    // -----------------------------------
    static int currentYear = DateTime.Now.Year;
    static int currentMonth = DateTime.Now.Month;

    static int daysInMonth = DateTime.DaysInMonth(currentYear, currentMonth) + 1;
    static Random random = new();

    List<DateOnly> disabledDates = new();
    List<DateOnly> selectedDates = new();

    protected override void OnInitialized()
    {
        for (int i = 0; i < 3; i++)
        {
            disabledDates.Add(new DateOnly(currentYear, currentMonth, random.Next(1, daysInMonth)));
            selectedDates.Add(new DateOnly(currentYear, currentMonth, random.Next(1, daysInMonth)));
        };
    }

    // -----------------------------------
    // Checkbox
    // -----------------------------------
    bool value2 = true;

    //// -----------------------------------
    //// Combobox
    //// -----------------------------------
    //string? name = "Nur Sari";
    //string? size = "";
}

@*
    // -----------------------------------
    // Dialog
    // -----------------------------------
*@
<div>
    <p>
        When 'Modal' is checked, the dialog can be <em>dismissed</em> by clicking outside of the dialog (anywhere on the overlay). When unchecked,
        the dialog can be <em>dismissed</em> only by the 'ESC' key.<br />The dialog can always be <em>closed</em> by using the 'Close dialog'
        button.
    </p>
    <p>
        When 'Trap focus' is checked, only the elements within the dialog will receive focus. When unchecked, focus will also move outside of the
        dialog.
    </p>
    <FluentCheckbox Name="modal" @bind-Value="Modal">
        Modal
    </FluentCheckbox>
    <FluentCheckbox Name="trap" @bind-Value="TrapFocus">
        Trap focus
    </FluentCheckbox>
</div>
<div>
    <FluentDialog @ref="MyFluentDialog" aria-label="Simple dialog" Modal=@Modal TrapFocus=@TrapFocus @ondialogdismiss=OnDismiss>
        <h2>Just a simple dialog</h2>
        <p>The 'Close dialog' button is automatically focussed.</p>
        <p>The 'Another button' doesn't do anything other than showing receiving focus.</p>
        <FluentButton Appearance="Appearance.Accent" Autofocus="true" @onclick="OnClose">Close dialog</FluentButton>
        <FluentButton>Another button</FluentButton>
    </FluentDialog>
</div>

<p>Status: @status</p>

<FluentButton Appearance=Appearance.Accent @onclick="OnOpen">Open dialog</FluentButton>

@code {
    private FluentDialog? MyFluentDialog;
    public bool TrapFocus = true;
    public bool Modal = true;
    private string? status;

    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
            MyFluentDialog!.Hide();
    }

    private void OnOpen()
    {
        status = "Dialog opened with button click";
        MyFluentDialog!.Show();
    }

    private void OnClose()
    {
        status = $"Dialog dismissed with reason: Close button clicked";
        MyFluentDialog!.Hide();

    }

    private void OnDismiss(DialogEventArgs args)
    {
        if (args is not null && args.Reason is not null && args.Reason == "dismiss")
        {
            status = $"Dialog dismissed with reason: Dismissed";
            MyFluentDialog!.Hide();
        }
    }
}

<FluentDivider></FluentDivider>

@*
    // -----------------------------------
    // Emojis
    // -----------------------------------
*@

<FluentEmoji Name="@FluentEmojis.Hamburger" EmojiStyle="EmojiStyle.Color" Size=@EmojiSize.Size32 />

<FluentDivider></FluentDivider>

@*
    // -----------------------------------
    // Flipper
    // -----------------------------------
*@

<FluentFlipper Direction="FlipperDirection.Previous">
    <FluentIcon Name="@FluentIcons.ArrowCircleLeft" Slot="previous" Size="@IconSize.Size16" Variant=IconVariant.Filled Color=Color.Neutral />
</FluentFlipper>

<FluentFlipper Direction="FlipperDirection.Next">
    <FluentIcon Name="@FluentIcons.ArrowCircleRight" Slot="next" Size="@IconSize.Size16" Variant=IconVariant.Filled Color=Color.Neutral />
</FluentFlipper>

<FluentDivider />

@*
    // -----------------------------------
    // Horizontal Scroll
    // -----------------------------------
*@

@*
<FluentHorizontalScroll class="both-gradient" Speed="600" Easing="ScrollEasing.EaseInOut">
    <FluentCard>Card number 1</FluentCard>
    <FluentCard>Card number 2</FluentCard>
    <FluentCard>Card number 3</FluentCard>
    <FluentCard>Card number 4</FluentCard>
    <FluentCard style="width:140px;height:160px">Card number 5</FluentCard>
    <FluentCard>Card number 6</FluentCard>
    <FluentCard>Card number 7</FluentCard>
    <FluentCard>Card number 8</FluentCard>
    <FluentCard>Card number 9</FluentCard>
    <FluentCard>Card number 10</FluentCard>
    <FluentCard>Card number 11</FluentCard>
    <FluentCard>Card number 12</FluentCard>
    <FluentCard>Card number 13</FluentCard>
    <FluentCard>Card number 14</FluentCard>
    <FluentCard>Card number 15</FluentCard>
    <FluentCard>Card number 16</FluentCard>
</FluentHorizontalScroll>

<FluentButton @onclick="() => _horizontalScroll.ScrollToPrevious()">Scroll to Previous</FluentButton>
<FluentButton @onclick="() => _horizontalScroll.ScrollToNext()">Scroll to Next</FluentButton>
<FluentButton @onclick="() => _horizontalScroll.ScrollInView(10)">Scroll to 10</FluentButton>

@inject ILogger<Controls> logger;

@code {
    FluentHorizontalScroll _horizontalScroll = default!;

    private void OnHorizontalScrollStart(HorizontalScrollEventArgs args)
    {
        logger.LogInformation($"{args.Scroll}");
    }

    private void OnHorizontalScrollEnd(HorizontalScrollEventArgs args)
    {
        logger.LogInformation($"{args.Scroll}");
    }
}
*@